<?xml version = "1.0" encoding="utf-8"?>
<api>
	<description>
		Family Unplugged REST api.
	</description>

	<command id="activities" security="public">
		<description>
			Family Unplugged activities list
		</description>
		<index>
			<description>
				Lists all activities
			</description>
			<action file="backend.php">
				<![CDATA[
					listActivities();
				]]>
			</action>
		</index>
		<get>
			<description>
				Search activity by name
			</description>
			<action file="backend.php">
				<![CDATA[
					getActivity($_REST['activities']);
				]]>
			</action>
		</get>

	</command>

	<command id="userID" security="public">
		<description>
			Get userID to simplify future interactions
		</description>
		<index>
			<description>
				nothing
			</description>
			<action file="backend.php">
				<![CDATA[
					test();
				]]>
			</action>
		</index>
		<get>
			<description><![CDATA[
				Get user database field 'PersonID' given a username and password.
				This should be run through SSL.

				e.g. - https://dev.m.gatech.edu/.../api/userID/1?encUsername={base64 url encoded username}&encPassword={base64 url encoded password}

				there must be something after userID/ before the parameters or
				the action will be treated as an index

				Maybe I should just put this in index?

				I implemented this to test BASIC REST authentication
				over SSL 

				]]>
			</description>
			<action file="backend.php">
				<![CDATA[
					getUserKey($_GET['encUsername'], $_GET['encPassword']);
				]]>
			</action>
		</get>
	</command>

	<command id="userInfo" security="public">
		<description>
			Information for current user
		</description>
		<index>
			<description>
				<![CDATA[
					Gets information about logged-in user

					https://dev.m.gatech.edu/.../api/userInfo
				]]>
			</description>
			<action file="backend.php">
				<![CDATA[
					getUserInfo();
				]]>
			</action>
		</index>
	</command>

	<command id="login" security="public">
		<description>
			Log in and get a session ID
		</description>
		<index>
			<description>
				<![CDATA[

					https://dev.m.gatech.edu/.../api/login?username=USERNAME&password=PASSWORD


					Returns error if invalid credentials or JSON with session ID to use for future requsts.


					This will be changed to be base64 encoded
				]]>
			</description>
			<action file="backend.php">
				<![CDATA[
					getSID($_GET['username'], $_GET['password']);
				]]>
			</action>
		</index>
	</command>

	<command id="testSID" security="public">
		<description>
			Test Session ID
		</description>
		<index>
			<description>
				<![CDATA[
					https://dev.m.gatech.edu/.../api/testSID


					throws some data on the screen
				]]>
			</description>
			<action file="backend.php">
				<![CDATA[
					testSID();
				]]>
			</action>
		</index>
	</command>

	<command id="events" security="public">
		<description>
			Interacts with an individual's events. Requires a valid session ID.
		</description>
		<index>
			<description>
				<![CDATA[
					Gets a user's events for a given day. May be expanded later.



					Ex: https://dev.m.gatech.edu/.../api/events?date=2014-03-08


					Put dates in MySQL format yyyy-mm-dd
				]]>
			</description>
			<action file="backend.php">
				<![CDATA[
					getDayEvents($_GET['date']);
				]]>
			</action>
		</index>
		<post>
			<description>
				<![CDATA[
				Submit an event for logged-in user.

				POST parameters - date (MySQL format), activityID, note, hours
					
				]]>
			</description>
			<action file="backend.php">
				<![CDATA[
					postEvent($_POST['date'], $_POST['activityID'], $_POST['note'], $_POST['hours']);
				]]>
			</action>
		</post>
	</command>


</api>
